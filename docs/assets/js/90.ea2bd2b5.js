(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{685:function(t,e,r){"use strict";r.r(e);var s=r(4),a=Object(s.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("p",[t._v("之前有文章介绍"),r("RouterLink",{attrs:{to:"/views/Blog/cesium/cesium-adding-local-data.html"}},[t._v("如何加载本地3D Tiles")]),t._v("，这篇文章介绍如何加载本地影像和地形数据。")],1),t._v(" "),r("h2",{attrs:{id:"准备工作"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[t._v("#")]),t._v(" 准备工作")]),t._v(" "),r("ul",[r("li",[t._v("安装了虚幻引擎（至少4.26或更高版本）和"),r("strong",[t._v("Cesium for Unreal")]),t._v("（1.2.1或者更高版本）。")]),t._v(" "),r("li",[t._v("安装最新的"),r("a",{attrs:{href:"http://www.cesiumlab.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cesiumlab 2.3.8版本"),r("OutboundLink")],1)]),t._v(" "),r("li",[t._v("准备本地影像和地形数据（影像可以用Cesiumlab自带的工具下载天地图，地形数据可以到"),r("a",{attrs:{href:"http://www.gscloud.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("地理空间数据云"),r("OutboundLink")],1),t._v("下载）")])]),t._v(" "),r("blockquote",[r("p",[t._v("如果您才接触"),r("strong",[t._v("Cesium for Unreal")]),t._v("，建议先学习"),r("RouterLink",{attrs:{to:"/views/Blog/cesium/cesium-unreal-quickstart.html"}},[t._v("（一）Cesium for Unreal快速入门（译）")]),t._v("教程。")],1)]),t._v(" "),r("h2",{attrs:{id:"创建新的cesium-for-unreal关卡"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#创建新的cesium-for-unreal关卡"}},[t._v("#")]),t._v(" 创建新的"),r("strong",[t._v("Cesium for Unreal")]),t._v("关卡")]),t._v(" "),r("p",[t._v("由于本教程是从本地加载影像和地形，所以不用连接"),r("strong",[t._v("Cesium ion")]),t._v("。创建新的空关卡，添加CesiumSunSky、FloatingPawn（新版本废弃了，建议用DynamicPawn）和空的Cesium3DTileset Actor。\n"),r("img",{attrs:{src:"https://i.loli.net/2021/06/02/KPpDBgTQYCanrsz.png",alt:""}})]),t._v(" "),r("h2",{attrs:{id:"加载本地地形"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#加载本地地形"}},[t._v("#")]),t._v(" 加载本地地形")]),t._v(" "),r("p",[t._v("运行Cesiumlab，打开"),r("strong",[t._v("分发服务")]),t._v("->"),r("strong",[t._v("地形服务")]),t._v("，查看地形服务的url和经纬度范围，接下来会用到。\n"),r("img",{attrs:{src:"https://i.loli.net/2021/06/02/zfmwBig75ISUNGQ.png",alt:""}}),t._v("\n选中自动创建的"),r("strong",[t._v("CesiumGeoreference")]),t._v("，将经纬度调整为地形数据所在的区域。比如本文下载的是地理空间数据云里的SRTMDEMUTM 90M高程数据，编号为1的，标识为utm_srtm_58_08，大概经纬度为：经度=107.052831，维度=22.01823。\n"),r("img",{attrs:{src:"https://i.loli.net/2021/06/02/KBOJmh6Qunv7UtD.png",alt:""}}),t._v(" "),r("img",{attrs:{src:"https://i.loli.net/2021/06/02/5WKqtJRkouhsEbG.png",alt:""}}),t._v("\n选中刚才创建的空白"),r("strong",[t._v("Cesium3DTileset")]),t._v(" Actor，Detail面板中修改Url为Cesiumlab里，地形服务的url，比如我这里为")]),t._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("http://localhost:9000/terrain/19c427c0c22b11ebbd3af738010b8f56/layer.json\n")])]),t._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[t._v("1")]),r("br")])]),r("p",[t._v("这时界面就应该能看到白色的地形了：\n"),r("img",{attrs:{src:"https://i.loli.net/2021/06/02/cOKjV8CWnTI7MGF.png",alt:""}})]),t._v(" "),r("h2",{attrs:{id:"加载本地影像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#加载本地影像"}},[t._v("#")]),t._v(" 加载本地影像")]),t._v(" "),r("p",[r("strong",[t._v("Cesium for Unreal")]),t._v("目前只支持TMS协议的影像数据，还好Cesiumlab 2.3.8版除了提供默认的WMTS标准，也新增了TMS标准。发布影像服务时，需要点击一下TMS按钮，记录地理范围和级别，接下来会用到：\n"),r("img",{attrs:{src:"https://i.loli.net/2021/06/02/WSO7BXgleEIxm5n.png",alt:""}})]),t._v(" "),r("p",[t._v("选中"),r("strong",[t._v("Cesium3DTileset")]),t._v(" Actor，在Detail面板中点击"),r("strong",[t._v("Add Component")]),t._v("按钮，搜索"),r("strong",[t._v("Cesium")]),t._v("，选择"),r("strong",[t._v("Cesium Tile Map Service Raster Overlay")]),t._v("：\n"),r("img",{attrs:{src:"https://i.loli.net/2021/06/02/4BDjiVoPXWuzgNb.png",alt:""}})]),t._v(" "),r("p",[t._v("保持"),r("strong",[t._v("CesiumTileMapServiceRasterOverlay")]),t._v("为选中状态，修改Url为之前记录的Cesiumlab里影像服务的TMS地址：")]),t._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("http://localhost:9000/image/tms/b4f29300b20c11ebb60c95cae837500b/tilemapresource.xml\n")])]),t._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[t._v("1")]),r("br")])]),r("p",[t._v("这时，界面没反应，勾选"),r("strong",[t._v("Specify Zoom Levels")]),t._v("，修改Min和Max Level为相应的级别：\n"),r("img",{attrs:{src:"https://i.loli.net/2021/06/02/tSE6OLorQuaGl3b.png",alt:""}}),t._v("\n拉高镜头，就能看到影像了：\n"),r("img",{attrs:{src:"https://i.loli.net/2021/06/02/1ejtSJvqrow2xO9.png",alt:""}})]),t._v(" "),r("p",[t._v("如果界面是黑的，可以选中"),r("strong",[t._v("CesiumSunSky")]),t._v("，调整时区和时间。")]),t._v(" "),r("h2",{attrs:{id:"资源链接"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#资源链接"}},[t._v("#")]),t._v(" 资源链接")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.bilibili.com/video/BV1Ew411Z7kx",target:"_blank",rel:"noopener noreferrer"}},[t._v("UE加载CesiumLab处理的影像数据"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://www.bilibili.com/video/BV1kv411V7vY",target:"_blank",rel:"noopener noreferrer"}},[t._v("UE加载CesiumLab处理的地形数据"),r("OutboundLink")],1)])]),t._v(" "),r("p",[t._v("都看到这里了，加个技术交流群一起组队研究呗^^")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://i.loli.net/2021/05/09/HzUyekM3QNoblKv.png",alt:""}})])])}),[],!1,null,null,null);e.default=a.exports}}]);